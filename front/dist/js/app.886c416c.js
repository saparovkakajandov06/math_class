(function(t){function e(e){for(var a,n,o=e[0],c=e[1],l=e[2],d=0,_=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&_.push(r[n][0]),r[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(_.length)_.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(a=!1)}a&&(i.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},r={app:0},i=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"009f":function(t,e,s){"use strict";s("de8c")},"01db":function(t,e,s){t.exports=s.p+"img/logo.30c32af3.svg"},"04a1":function(t,e,s){t.exports=s.p+"img/heart_2.634da6a8.svg"},"0ee8":function(t,e,s){},"178d":function(t,e,s){},"22fd":function(t,e,s){t.exports=s.p+"img/user_logo.031b1641.svg"},"230b":function(t,e,s){},3422:function(t,e,s){"use strict";s("0ee8")},"366a":function(t,e,s){},"3a20":function(t,e,s){t.exports=s.p+"img/select_arrow.fa9f27c3.svg"},"3f81":function(t,e,s){t.exports=s.p+"img/select_arrow.fa9f27c3.svg"},4381:function(t,e,s){t.exports=s.p+"img/modal_close.1615eafe.svg"},"4a83":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Main")],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Modals",{on:{authUser:t.authUser}}),s("MyHeader",{ref:"header"}),s("router-view",{on:{authUser:t.authUser}})],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header d-flex"},[a("div",{staticClass:"my_menu col-9 px-0"},[t._m(0),a("router-link",{staticClass:"menuNavItem",attrs:{name:"catalog",to:"/"}},[t._v("Каталог задач")]),a("a",{attrs:{href:"/tester.html"}},[t._v("Конструктор")]),a("router-link",{staticClass:"menuNavItem",attrs:{name:"my_tasks",to:"/my_tasks"}},[t._v("Мои задачи")]),a("router-link",{staticClass:"menuNavItem",attrs:{name:"favorites",to:"/favorites"}},[t._v("Избранное")]),"moderator"===t.USER_POWERS||"admin"===t.USER_POWERS?a("router-link",{staticClass:"menuNavItem",attrs:{name:"moderation",to:"/moderation"}},[t._v("Модерация")]):t._e(),"admin"===t.USER_POWERS?a("router-link",{staticClass:"menuNavItem",attrs:{name:"admin",to:"/admin"}},[t._v("Админка")]):t._e()],1),a("div",{staticClass:"col-3 my-auto pr-4 text-right"},[a("span",{on:{click:function(e){return t.loginLogout()}}},[a("img",{attrs:{src:s("22fd"),alt:""}}),a("span",{staticClass:"mx-2"},[t._v(t._s(t.USER_FIO))]),a("img",{attrs:{src:s("3f81"),alt:""}})])])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticStyle:{"text-decoration-line":"none","margin-right":"25px"},attrs:{href:"https://matclass.ru",target:"new"}},[a("img",{attrs:{src:s("01db"),height:"64px",alt:""}})])}],u=s("5530"),d=s("2f62"),_={name:"MyHeader",mounted:function(){this.IS_AUTHENTICATED();var t=window.location.pathname;switch(t){case"/my_tasks":window.$(".menuNavItem[name=my_tasks]").addClass("active");break;case"/favorites":window.$(".menuNavItem[name=favorites]").addClass("active");break;case"/":window.$(".menuNavItem[name=catalog]").addClass("active");break}window.$(".menuNavItem").on("click",(function(){window.$(".menuNavItem").removeClass("active"),window.$(this).addClass("active")}))},computed:Object(u["a"])({},Object(d["c"])(["USER_FIO","USER_POWERS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["LOGOUT","IS_AUTHENTICATED"])),{},{loginLogout:function(){"Авторизоваться"===this.USER_FIO?window.$("#auth").modal("show"):this.LOGOUT()}})},m=_,f=s("2877"),v=Object(f["a"])(m,c,l,!1,null,null,null),p=v.exports,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"modal fade",staticStyle:{"z-index":"3000"},attrs:{id:"alertModal",tabindex:"1",role:"dialog","aria-labelledby":"alertModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog mx-auto mt-5 pt-5",attrs:{role:"document"}},[s("div",{staticClass:"modal-content",staticStyle:{"margin-top":"110px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.35)"}},[t._m(0),t._m(1),s("div",{staticClass:"close",on:{click:function(e){return t.hideModal("#alertModal")}}})])])]),s("div",{staticClass:"modal fade",attrs:{id:"modal_link",tabindex:"-1",role:"dialog","aria-labelledby":"managerCopyPastLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog mx-auto mt-5 pt-5",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body px-5 text-center"},[t._m(2),s("input",{staticClass:"copy_link w-100 mb-4",on:{click:t.copyPasteLink}})]),s("div",{staticClass:"close",on:{click:function(e){return t.hideModal("#modal_link")}}})])])]),s("div",{staticClass:"modal fade",staticStyle:{"z-index":"2000","background-color":"#31200b78"},attrs:{id:"auth",tabindex:"-1",role:"dialog","aria-labelledby":"managerCopyPastLabel","aria-hidden":"true","data-backdrop":"static","data-keyboard":"false"}},[s("div",{staticClass:"modal-dialog mx-auto mt-5 pt-5",staticStyle:{"margin-top":"160px!important"},attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body px-5 text-center"},[t._m(3),s("div",{staticClass:"auth_content"},[s("div",{attrs:{name:"auth"}},[s("input",{staticClass:"w-100",attrs:{name:"login",placeholder:"логин (e-mail)"}}),s("input",{staticClass:"mt-4 w-100",attrs:{name:"pw",type:"password",placeholder:"пароль"}}),s("span",{staticClass:"forget_pw"},[t._v("забыли пароль?")]),s("br"),s("button",{staticClass:"my-3 mx-auto",attrs:{type:"button"},on:{click:function(e){return t.getAuth()}}},[t._v("Войти")])]),s("div",{staticClass:"my_hidden",attrs:{name:"reg"}},[s("input",{staticClass:"w-100",attrs:{name:"fio",placeholder:"Фамилия* Имя* Отчество"}}),s("select",{staticClass:"mt-4 w-100",attrs:{name:"roles"}},[s("option",{attrs:{value:""}},[t._v("Роль*")]),t._l(t.ROLES,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),s("input",{staticClass:"mt-4 w-100",attrs:{name:"login",placeholder:"логин* (e-mail)"}}),s("input",{staticClass:"mt-4 w-100",attrs:{name:"pw",type:"password",placeholder:"пароль*"}}),s("input",{staticClass:"mt-4 w-100",attrs:{name:"pw2",type:"password",placeholder:"повторите пароль*"}}),s("button",{staticClass:"my-4 mx-auto",attrs:{type:"button"},on:{click:function(e){return t.getReg()}}},[t._v("Зарегистрироваться")])]),s("div",{staticClass:"my_hidden",attrs:{name:"forget"}},[s("input",{staticClass:"w-100",attrs:{name:"login",placeholder:"логин (e-mail)"}}),s("button",{staticClass:"my-4 mx-auto",attrs:{type:"button"},on:{click:function(e){return t.getPassword()}}},[t._v("Восстановить пароль")])])])]),s("div",{staticClass:"close",on:{click:function(e){return t.goToCatalog()}}})])])])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head mt-4 text-center"},[a("img",{staticClass:"mb-3",attrs:{src:s("8d14"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-body"},[s("h5",{staticClass:"mt-4 mb-3 text-center",attrs:{id:"alertModalMessage"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head my-4 text-center"},[a("img",{attrs:{src:s("a658"),alt:""}}),a("br"),a("br"),a("span",[t._v("Ссылка на задачу скопирована в буфер обмена")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head2 auth_header my-4 text-center"},[a("img",{attrs:{src:s("644a"),alt:""}}),a("br"),a("br"),a("span",{staticClass:"active",attrs:{name:"auth"}},[t._v("Авторизация")]),t._v(" "),a("span",{attrs:{name:"reg"}},[t._v("Регистрация")])])}],w=(s("7db0"),{name:"Modals",mounted:function(){this.GET_ROLES()},computed:Object(u["a"])({},Object(d["c"])(["ROLES"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["GET_ROLES","FORGET_PASSWORD","LOGIN","REGISTRATION"])),{},{hideModal:function(t){window.$(t).modal("hide")},copyPasteLink:function(){window.prompt("Скопировать в клипбоард: Ctrl+C, Enter",window.$("#modal_link input:first").val())},goToCatalog:function(){window.$("#auth").modal("hide"),"/"!==window.location.pathname&&(window.location.href="/")},getPassword:function(){if(this.validateLogin("forget"))return!1;var t=window.$("#auth div[name=forget]"),e=t.find("input[name=login]").val();this.FORGET_PASSWORD(e)},validateLogin:function(t){var e=!1,s=window.$("#auth div[name="+t+"]");return this.notEmail(s.find("input[name=login]").val())?(s.find("input[name=login]").addClass("error_input"),e=!0):s.find("input[name=login]").removeClass("error_input"),e},getAuth:function(){if(this.validateLogin("auth"))return!1;var t=window.$("#auth div[name=auth]"),e=t.find("input[name=login]").val(),s=t.find("input[name=pw]").val();this.LOGIN({login:e,pw:s}),this.$emit("authUser")},getReg:function(){if(this.validateReg())return!1;var t=window.$("#auth div[name=reg]"),e={fio:t.find("input[name=fio]").val(),login:t.find("input[name=login]").val(),roleId:t.find("select[name=roles]").val(),pw:t.find("input[name=pw]").val()};this.REGISTRATION(e)},validateReg:function(){var t=!1,e=window.$("#auth div[name=reg]");return e.find("input[name=fio]").val().length<3?(e.find("input[name=fio]").addClass("error_input"),t=!0):e.find("input[name=fio]").removeClass("error_input"),this.notEmail(e.find("input[name=login]").val())?(e.find("input[name=login]").addClass("error_input"),t=!0):e.find("input[name=login]").removeClass("error_input"),e.find("input[name=pw]").val().length<6?(e.find("input[name=pw]").addClass("error_input"),t=!0):(e.find("input[name=pw]").removeClass("error_input"),e.find("input[name=pw]").val()!==e.find("input[name=pw2]").val()?(e.find("input[name=pw2]").addClass("error_input"),t=!0):e.find("input[name=pw2]").removeClass("error_input")),""===e.find("select[name=roles]").val()?(e.find("select[name=roles]").addClass("error_input"),t=!0):e.find("select[name=roles]").removeClass("error_input"),t},notEmail:function(t){var e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return!e.test(t)}})}),g=w,C=Object(f["a"])(g,h,k,!1,null,null,null),b=C.exports,T={name:"Main",components:{MyHeader:p,Modals:b},mounted:function(){},methods:{authUser:function(){this.$refs.header.IS_AUTHENTICATED()}}},S=T,A=Object(f["a"])(S,n,o,!1,null,null,null),E=A.exports,y={name:"App",components:{Main:E}},x=y,O=Object(f["a"])(x,r,i,!1,null,null,null),R=O.exports,I=(s("99af"),s("8c4f")),N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"admin"===t.USER_POWERS?s("div",{staticClass:"main-admin row container"},[s("div",{staticClass:"main-admin__menu col-md-6 col-sm-12"},[s("h1",[t._v("Администрирование сайта")]),s("h2",[t._v("Меню:")]),s("nav",[s("router-link",{staticClass:"menuNavItem",attrs:{name:"users",to:"/users"}},[t._v("Пользователи("+t._s(t.COUNT.all_users)+")")]),s("router-link",{staticClass:"menuNavItem",attrs:{name:"tasks",to:"/tasks"}},[t._v("Задачи("+t._s(t.COUNT.all_tasks)+")")])],1)]),s("div",{staticClass:"main-admin__logs col-md-6 col-sm-12"},[s("div",{staticClass:"main-admin__logs-header"},[s("h2",[t._v("Последние действия:")]),s("router-link",{staticClass:"menuNavItem",attrs:{name:"logs",to:"/logs"}},[t._v("Открыть все")])],1),s("div",{staticClass:"main-admin__logs-content"},[0===t.ADMIN_LOGS.length?s("div",{staticClass:"no-logs"},[t._v("Пока ничего нет")]):s("div",{staticClass:"actions"},t._l(t.ADMIN_LOGS,(function(e){return s("div",{key:e.id,staticClass:"action"},[s("div",{staticClass:"action__date-time"},[s("div",{staticClass:"date"},[t._v(t._s(e.date))]),s("div",{staticClass:"time"},[t._v(t._s(e.time))])]),s("div",{staticClass:"action__content"},[s("div",{staticClass:"action__header"},[s("span",{staticClass:"user"},[t._v(t._s(e.admin_name))]),s("span",{staticClass:"user__role"},[t._v(" ("+t._s(e.admin_powers)+")")])]),s("div",{staticClass:"action__description"},[t._v(" "+t._s(e.action.message)+": "+t._s(e.action.user_name?e.action.user_name:"№"+e.action.task_id)+" "+t._s(e.action.user_addition)+" "+t._s("lock"===e.action.type_log?e.action.lock_forever?"(Навсегда)":"(до "+e.action.lock_time+")":"")+" ")])])])})),0)])])]):t._e()},U=[],$=s("1da1"),j=(s("96cf"),{name:"MainAdmin",computed:Object(u["a"])({},Object(d["c"])(["USER_POWERS","ADMIN_LOGS","COUNT"])),methods:Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","ADMIN_GET_LOGS","GET_COUNT"])),created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:"admin"!==t.USER_POWERS&&(window.location.href="/");case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_LOGS({page:1,onlyLastLogs:!0});case 2:return e.next=4,t.GET_COUNT();case 4:case"end":return e.stop()}}),e)})))()}}),F=j,P=(s("5bd6"),Object(f["a"])(F,N,U,!1,null,"69eb594a",null)),D=P.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"admin"===t.USER_POWERS?s("div",{staticClass:"logs container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("h1",[t._v("Последние действия:")]),s("div",{staticClass:"logs__content"},[0===t.ADMIN_LOGS.length?s("div",{staticClass:"no-logs"},[t._v("Пока ничего нет")]):s("div",{staticClass:"actions"},t._l(t.ADMIN_LOGS,(function(e){return s("div",{key:e.id,staticClass:"action"},[s("div",{staticClass:"action__date-time"},[s("div",{staticClass:"date"},[t._v(t._s(e.date))]),s("div",{staticClass:"time"},[t._v(t._s(e.time))])]),s("div",{staticClass:"action__content"},[s("div",{staticClass:"action__header"},[s("span",{staticClass:"user"},[t._v(t._s(e.admin_name))]),s("span",{staticClass:"user__role"},[t._v(" ("+t._s(e.admin_powers)+")")])]),s("div",{staticClass:"action__description"},[t._v(" "+t._s(e.action.message)+": "+t._s(e.action.user_name?e.action.user_name:"№"+e.action.task_id)+" "+t._s(e.action.user_addition)+" "+t._s("lock"===e.action.type_log?e.action.lock_forever?"(Навсегда)":"(до "+e.action.lock_time+")":"")+" ")])])])})),0)]),t.page&&t.pages?s("ImprovedPaginator",{attrs:{currentPage:t.page,countPages:t.pages},on:{getPage:t.getPage}}):t._e()],1)])]):t._e()},G=[],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-center mb-12 my-4 pagination"},[s("div",{staticClass:"pages page_first",attrs:{title:"открыть первую страницу"},on:{click:function(e){return t.getPage(1)}}}),t._l(t.showed_pages,(function(e){return s("div",{key:e},[s("div",{class:[e===t.currentPage?"active":"","page"],on:{click:function(s){return t.getPage(e)}}},[t._v(" "+t._s(e)+" ")])])})),s("div",{staticClass:"pages page_last",attrs:{title:"открыть последнюю страницу"},on:{click:function(e){return t.getPage(t.countPages)}}})],2)])},L=[],H={name:"ImprovedPaginator",props:["currentPage","countPages"],data:function(){return{showed_pages:[],array_all_pages:[]}},mounted:function(){this.initPaginator()},methods:{getPage:function(t){this.$emit("getPage",t),this.initPaginator(t)},initPaginator:function(t){for(var e=t||this.currentPage,s=1;s<=this.countPages;s++)this.array_all_pages.push(s);this.showed_pages=[];for(var a=e-3;a<=e+3;a++)a>0&&a<=this.countPages&&this.showed_pages.push(a)}}},W=H,V=(s("009f"),Object(f["a"])(W,K,L,!1,null,"9f4f97d0",null)),z=V.exports,Z={name:"Logs",data:function(){return{pages:!1,page:1}},components:{ImprovedPaginator:z},computed:Object(u["a"])({},Object(d["c"])(["USER_POWERS","ADMIN_LOGS","PAGES_LOGS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","ADMIN_GET_LOGS"])),{},{getPage:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.ADMIN_GET_LOGS({page:e.page,onlyLastLogs:!1});case 2:e.page=t;case 3:case"end":return s.stop()}}),s)})))()}}),created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:"admin"!==t.USER_POWERS&&(window.location.href="/");case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_LOGS({page:t.page,onlyLastLogs:!1});case 2:t.pages=t.PAGES_LOGS;case 3:case"end":return e.stop()}}),e)})))()}},q=Z,J=(s("7d6d"),Object(f["a"])(q,M,G,!1,null,"0c7688fc",null)),B=J.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"admin"===t.USER_POWERS||"moderator"===t.USER_POWERS?s("div",{staticClass:"main-moderator-and-tasks container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("h1",[t._v("Список новых задач("+t._s(t.COUNT.new_tasks)+")")]),s("p",[s("router-link",{attrs:{to:"/tasks",name:"tasks"}},[t._v("Открыть все задачи")])],1),s("table",[t._m(0),s("tbody",t._l(t.ADMIN_TASKS_FOR_CHECK,(function(e){return s("tr",{key:e.id,on:{click:function(s){return t.openModerationTask(e)}}},[s("td",[t._v(t._s(e.modified_date)),s("br"),t._v(t._s(e.modified_time))]),s("td",[t._v("Задача №"+t._s(e.id))]),s("td",[t._v(t._s(e.real_creator===e.author?e.author:e.author+" ("+e.real_creator+")"))]),s("td",[t._v(t._s(e.number_recheck))]),s("td",[t._v(t._s(e.difficulty))]),s("td",[t._v(t._s(e.class_level))]),s("td",[t._v(t._s(e.source))])])})),0)])])]),t.page&&t.pages?s("ImprovedPaginator",{attrs:{currentPage:t.page,countPages:t.pages},on:{getPage:t.getPage}}):t._e(),s("transition",{attrs:{name:"fade"}},[s("ModalsWrapper",{directives:[{name:"show",rawName:"v-show",value:t.show_modal_moderation,expression:"show_modal_moderation"}],attrs:{type_modal:"task_moderation",check_task:t.check_task},on:{"close-modal":function(e){t.show_modal_moderation=!1},"moder-edit-task":t.moderEditTask,"moder-lock-author":t.moderLockAuthor,"moder-delete-task":t.moderDeleteTask,"reject-task":t.rejectTask,"confirm-task":t.confirmTask}})],1)],1):t._e()},Q=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Добавлено")]),s("th",[t._v("Название")]),s("th",[t._v("Автор")]),s("th",[t._v("Перепроверок")]),s("th",[t._v("Сложность")]),s("th",[t._v("Классы")]),s("th",[t._v("Источник")])])])}],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-new-user modal-window",attrs:{tabindex:"1",role:"dialog","aria-labelledby":"alertModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-window__content px-5 py-3 text-center"},[a("span",{staticClass:"close",on:{click:function(e){return t.$emit("close-modal",t.type_modal)}}},[a("img",{attrs:{src:s("4381"),alt:"close"}})]),"add_user"===t.type_modal?a("AddUser",{on:{"add-user-complete":function(e){return t.$emit("add-user-complete")}}}):t._e(),"edit_user"===t.type_modal?a("EditUser",{attrs:{user:t.user},on:{"delete-user":function(e){return t.$emit("delete-user")},"edit-user":t.editUser}}):t._e(),"edit_task"===t.type_modal?a("EditTask",{attrs:{edit_task:t.edit_task},on:{"complete-edit-task":t.completeEditTask,"delete-task":function(e){return t.$emit("delete-task")},"lock-author":t.lockAuthor}}):t._e(),"task_moderation"===t.type_modal?a("TaskModeration",{attrs:{check_task:t.check_task},on:{"moder-edit-task":function(e){return t.$emit("moder-edit-task")},"moder-lock-author":t.moderLockAuthor,"moder-delete-task":function(e){return t.$emit("moder-delete-task")},"confirm-task":t.moderConfirmTask,"reject-task":t.moderRejectTask}}):t._e(),"confirm_delete_users"===t.type_modal?a("ConfirmDeleteUsers",{attrs:{checkedUsers:t.checked_users},on:{"confirm-delete":function(e){return t.$emit("confirm-delete")},"cancel-delete":function(e){return t.$emit("cancel-delete")}}}):t._e()],1)])},tt=[],et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-block"},[s("h2",[t._v("Добавить нового пользователя")]),s("form",{attrs:{action:""}},[t.errors.fio?s("p",{staticClass:"text-danger text-left m-0"},[t._v("Имя пользователя должно быть не короче 3 символов!")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_data.fio,expression:"user_data.fio"}],staticClass:"form-control",class:t.errors.fio?"is-invalid":"",attrs:{type:"text",placeholder:"ФИО"},domProps:{value:t.user_data.fio},on:{input:function(e){e.target.composing||t.$set(t.user_data,"fio",e.target.value)}}}),t.errors.email?s("p",{staticClass:"text-danger text-left m-0"},[t._v("Некорректный e-mail")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_data.email,expression:"user_data.email"}],staticClass:"form-control",class:t.errors.email?"is-invalid":"",attrs:{type:"text",placeholder:"Email"},domProps:{value:t.user_data.email},on:{input:function(e){e.target.composing||t.$set(t.user_data,"email",e.target.value)}}}),t.errors.password?s("p",{staticClass:"text-danger text-left m-0"},[t._v("Пароль должен быть не короче 6 символов")]):t._e(),t.errors.repeat_password?s("p",{staticClass:"text-danger text-left m-0"},[t._v("Пароли не совпадают")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_data.password,expression:"user_data.password"}],staticClass:"form-control",class:t.errors.password?"is-invalid":"",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.user_data.password},on:{input:function(e){e.target.composing||t.$set(t.user_data,"password",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user_data.repeat_password,expression:"user_data.repeat_password"}],staticClass:"form-control",class:t.errors.repeat_password?"is-invalid":"",attrs:{type:"password",placeholder:"Повторите пароль"},domProps:{value:t.user_data.repeat_password},on:{input:function(e){e.target.composing||t.$set(t.user_data,"repeat_password",e.target.value)}}}),s("div",{staticClass:"input-group mb-3"},[t._m(0),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user_data.role,expression:"user_data.role"}],staticClass:"custom-select",class:t.errors.role?"is-invalid":"",attrs:{id:"inputGroupSelect01"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user_data,"role",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"2",selected:""}},[t._v("Преподаватель")]),s("option",{attrs:{value:"1"}},[t._v("Ученик")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.user_data.role,expression:"user_data.role === '2'"}],staticClass:"input-group mb-3"},[t._m(1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.user_data.power,expression:"user_data.power"}],staticClass:"custom-select",class:t.errors.power?"is-invalid":"",attrs:{id:"inputGroupSelect02"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user_data,"power",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"no",selected:""}},[t._v("Нет")]),s("option",{attrs:{value:"moderator"}},[t._v("Модератор")]),s("option",{attrs:{value:"admin"}},[t._v("Администратор")])])]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.save}},[t._v("Сохранить")])])])])},st=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect01"}},[t._v("Роль")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"inputGroupSelect01"}},[t._v("Доп. полномочия")])])}],at=(s("498a"),{name:"AddUser",data:function(){return{user_data:{fio:"",email:"",password:"",repeat_password:"",role:"2",power:"no"},errors:{fio:!1,email:!1,password:!1,repeat_password:!1,role:!1,power:!1}}},methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["ADMIN_ADD_USER"])),{},{save:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.user_data.fio=t.user_data.fio.trim(),t.user_data.email=t.user_data.email.trim(),!t.validateReg()){e.next=7;break}return e.next=5,t.ADMIN_ADD_USER(t.user_data);case 5:s=e.sent,s&&(t.$emit("add-user-complete"),setTimeout((function(){t.user_data={fio:"",email:"",password:"",repeat_password:"",role:"",power:""}}),500));case 7:case"end":return e.stop()}}),e)})))()},notEmail:function(t){var e=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;return!e.test(t)},validateReg:function(){var t=!0;return this.user_data.fio.length<3?(this.errors.fio=!0,t=!1):this.errors.fio=!1,this.notEmail(this.user_data.email)?(this.errors.email=!0,t=!1):this.errors.email=!1,this.user_data.password.length<6?(this.errors.password=!0,t=!1):(this.errors.password=!1,this.user_data.password!==this.user_data.repeat_password?(this.errors.repeat_password=!0,t=!1):this.errors.repeat_password=!1),""===this.user_data.role?(this.errors.role=!0,t=!1):this.errors.role=!1,""===this.user_data.power?(this.errors.power=!0,t=!1):this.errors.power=!1,t}})}),rt=at,it=(s("dfcc"),Object(f["a"])(rt,et,st,!1,null,"3bd22aa1",null)),nt=it.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-block"},[s("h2",[t._v("Редактирование пользователя")]),s("form",{attrs:{action:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_fio,expression:"edit_user.user_fio"}],attrs:{type:"text",placeholder:"ФИО"},domProps:{value:t.edit_user.user_fio},on:{input:function(e){e.target.composing||t.$set(t.edit_user,"user_fio",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_email,expression:"edit_user.user_email"}],attrs:{type:"text",placeholder:"E-mail"},domProps:{value:t.edit_user.user_email},on:{input:function(e){e.target.composing||t.$set(t.edit_user,"user_email",e.target.value)}}}),s("div",{staticClass:"input-group mb-3"},[t._m(0),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_role,expression:"edit_user.user_role"}],staticClass:"custom-select",attrs:{id:"editSelectRole"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edit_user,"user_role",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"},domProps:{selected:"Ученик"===t.edit_user.user_role}},[t._v("Ученик")]),s("option",{attrs:{value:"2"},domProps:{selected:"Преподаватель"===t.edit_user.user_role}},[t._v("Преподаватель")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:2===Number(t.edit_user.user_role),expression:"Number(edit_user.user_role) === 2"}],staticClass:"input-group mb-3"},[t._m(1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_powers,expression:"edit_user.user_powers"}],staticClass:"custom-select",attrs:{id:"editSelectPowers"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edit_user,"user_powers",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"no"},domProps:{selected:"no"===t.edit_user.user_powers}},[t._v("Нет")]),s("option",{attrs:{value:"moderator"},domProps:{selected:"moderator"===t.edit_user.user_powers}},[t._v("Модератор")]),s("option",{attrs:{value:"admin"},domProps:{selected:"admin"===t.edit_user.user_powers}},[t._v("Администратор")])])]),s("div",{staticClass:"custom-control custom-checkbox text-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_lock,expression:"edit_user.user_lock"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"editLockUser"},domProps:{checked:Array.isArray(t.edit_user.user_lock)?t._i(t.edit_user.user_lock,null)>-1:t.edit_user.user_lock},on:{change:function(e){var s=t.edit_user.user_lock,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&t.$set(t.edit_user,"user_lock",s.concat([i])):n>-1&&t.$set(t.edit_user,"user_lock",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.edit_user,"user_lock",r)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"editLockUser"}},[t._v("Заблокировать пользователя")])]),t.edit_user.user_lock&&t.user.lock?s("p",{staticClass:"text-left"},[t._v("Пользователь заблокирован "+t._s(t.user.lock_forever?"Навсегда":"до "+t.user.lock_time))]):t._e(),!t.user.lock&&t.edit_user.user_lock?s("div",{staticClass:"input-group mb-3"},[t._m(2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_user.user_type_lock_time,expression:"edit_user.user_type_lock_time"}],staticClass:"custom-select",attrs:{id:"editSelectTimeLock"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.edit_user,"user_type_lock_time",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"forever"}},[t._v("Навсегда")]),s("option",{attrs:{value:"1d"}},[t._v("День")]),s("option",{attrs:{value:"3d"}},[t._v("3 дня")]),s("option",{attrs:{value:"week"}},[t._v("Неделя")]),s("option",{attrs:{value:"month"}},[t._v("Месяц")])])]):t._e(),s("div",{staticClass:"buttons"},[s("div",{staticClass:"main-buttons"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.$emit("edit-user",t.edit_user)}}},[t._v("Сохранить")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.$emit("delete-user")}}},[t._v("Удалить пользователя")])])])])])},ct=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"editSelectRole"}},[t._v("Роль")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"editSelectPowers"}},[t._v("Доп. полномочия")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"editSelectTimeLock"}},[t._v("Время блокировки")])])}],lt={name:"EditUser",props:{user:{type:Object,require:!0}},data:function(){return{edit_user:{user_id:0,user_type_lock_time:"forever",user_fio:"",user_email:"",user_lock:!1,user_role:0,user_powers:""}}},watch:{user:function(){this.edit_user.user_id=this.user.id,this.edit_user.user_fio=this.user.fio,this.edit_user.user_email=this.user.email,this.edit_user.user_lock=this.user.lock,this.edit_user.user_lock=this.user.lock,this.edit_user.user_role=this.user.role_key,this.edit_user.user_powers=this.user.powers_key,this.user.lock&&(this.edit_user.user_type_lock_time=this.user.type_lock_time)}}},ut=lt,dt=(s("7ff6"),Object(f["a"])(ut,ot,ct,!1,null,"2c46b036",null)),_t=dt.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-block"},[s("h2",[t._v("Редактирование задачи №"+t._s(t.task.id))]),s("form",{attrs:{action:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.author,expression:"task.author"}],attrs:{type:"text",placeholder:"Автор"},domProps:{value:t.task.author},on:{input:function(e){e.target.composing||t.$set(t.task,"author",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.source,expression:"task.source"}],attrs:{type:"text",placeholder:"Источник"},domProps:{value:t.task.source},on:{input:function(e){e.target.composing||t.$set(t.task,"source",e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"form-control",attrs:{id:"task-description",placeholder:"Описание задачи"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}}),s("div",{staticClass:"input-group mb-3"},[t._m(0),s("select",{directives:[{name:"model",rawName:"v-model",value:t.task.difficulty,expression:"task.difficulty"}],staticClass:"custom-select",attrs:{id:"selectDifficulty"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.task,"difficulty",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0"}},[t._v("0")]),s("option",{attrs:{value:"1"}},[t._v("1")]),s("option",{attrs:{value:"2"}},[t._v("2")]),s("option",{attrs:{value:"3"}},[t._v("3")])])]),s("div",{staticClass:"input-group mb-3"},[t._m(1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.task.class_level_key,expression:"task.class_level_key"}],staticClass:"custom-select",attrs:{id:"selectClass"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.task,"class_level_key",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("1-3")]),s("option",{attrs:{value:"2"}},[t._v("4-6")]),s("option",{attrs:{value:"3"}},[t._v("7-9")]),s("option",{attrs:{value:"4"}},[t._v("10-11")])])]),s("p",{staticClass:"text-left"},[s("a",{attrs:{href:"/resolver.html?id="+t.task.id,target:"_blank"}},[t._v("Открыть задание")])]),s("hr"),s("div",{staticClass:"input-group mb-3"},[t._m(2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.task.status,expression:"task.status"}],staticClass:"custom-select",attrs:{id:"selectStatus"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.task,"status",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"Проверка"}},[t._v("Проверка")]),s("option",{attrs:{value:"Опубликована"}},[t._v("Опубликована")]),s("option",{attrs:{value:"Отклонено"}},[t._v("Отклонено")])])]),null===t.edit_task.real_creator?s("p",[t._v("Создатель задачи удалён. "+t._s(t.edit_task.real_creator))]):t._e(),null!==t.edit_task.real_creator?s("div",{staticClass:"custom-control custom-checkbox text-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lock_user,expression:"lock_user"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"},domProps:{checked:Array.isArray(t.lock_user)?t._i(t.lock_user,null)>-1:t.lock_user},on:{change:function(e){var s=t.lock_user,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.lock_user=s.concat([i])):n>-1&&(t.lock_user=s.slice(0,n).concat(s.slice(n+1)))}else t.lock_user=r}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"customCheck1"}},[t._v("Заблокировать автора")])]):t._e(),null!==t.edit_task.real_creator?s("div",{directives:[{name:"show",rawName:"v-show",value:t.lock_user,expression:"lock_user"}],staticClass:"input-group mb-3"},[t._m(3),s("select",{directives:[{name:"model",rawName:"v-model",value:t.time_lock,expression:"time_lock"}],staticClass:"custom-select",attrs:{id:"select-lock-user"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.time_lock=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"forever"}},[t._v("Навсегда")]),s("option",{attrs:{value:"1d"}},[t._v("День")]),s("option",{attrs:{value:"3d"}},[t._v("3 дня")]),s("option",{attrs:{value:"week"}},[t._v("Неделя")]),s("option",{attrs:{value:"month"}},[t._v("Месяц")])])]):t._e(),s("div",{staticClass:"buttons"},[t.lock_user?t._e():s("div",{staticClass:"main-buttons"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.$emit("complete-edit-task",t.task)}}},[t._v("Сохранить")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.$emit("delete-task")}}},[t._v("Удалить")])]),t.lock_user?s("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(e){return t.$emit("lock-author",t.time_lock)}}},[t._v("Заблокировать и удалить задачу")]):t._e()])])])},ft=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"selectDifficulty"}},[t._v("Сложность")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"selectClass"}},[t._v("Классы")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"selectStatus"}},[t._v("Статус")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"select-lock-user"}},[t._v("Время блокировки")])])}],vt=(s("a4d3"),s("e01a"),{name:"EditTask",props:{edit_task:{type:Object}},data:function(){return{lock_user:!1,time_lock:"forever",task:{id:"",author:"",author_id:"",difficulty:0,class_level_key:"",source:"",description:"",status:""}}},watch:{edit_task:function(){this.task.id=this.edit_task.id,this.task.author=this.edit_task.author,this.task.author_id=this.edit_task.author_id,this.task.difficulty=this.edit_task.difficulty,this.task.class_level_key=this.edit_task.class_level_key,this.task.source=this.edit_task.source,this.task.description=this.edit_task.description,this.task.status=this.edit_task.status}}}),pt=vt,ht=(s("8347"),Object(f["a"])(pt,mt,ft,!1,null,"73283a43",null)),kt=ht.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-block"},[s("h2",[t._v("Проверка задачи №"+t._s(t.task.id))]),s("form",{attrs:{action:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.author,expression:"task.author"}],attrs:{type:"text",placeholder:"Автор",id:"author_task",disabled:!t.edit_mode},domProps:{value:t.task.author},on:{input:function(e){e.target.composing||t.$set(t.task,"author",e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.source,expression:"task.source"}],attrs:{type:"text",placeholder:"Источник",id:"source_task",disabled:!t.edit_mode},domProps:{value:t.task.source},on:{input:function(e){e.target.composing||t.$set(t.task,"source",e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"form-control",attrs:{placeholder:"Описание задачи",id:"task_description",rows:"4",disabled:!t.edit_mode},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}}),s("div",{staticClass:"input-group mb-3"},[t._m(0),s("select",{directives:[{name:"model",rawName:"v-model",value:t.task.difficulty,expression:"task.difficulty"}],staticClass:"custom-select",attrs:{id:"selectDifficulty",disabled:!t.edit_mode},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.task,"difficulty",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0"}},[t._v("0")]),s("option",{attrs:{value:"1"}},[t._v("1")]),s("option",{attrs:{value:"2"}},[t._v("2")]),s("option",{attrs:{value:"3"}},[t._v("3")])])]),s("div",{staticClass:"input-group mb-3"},[t._m(1),s("select",{directives:[{name:"model",rawName:"v-model",value:t.task.class_level_key,expression:"task.class_level_key"}],staticClass:"custom-select",attrs:{id:"selectClass",disabled:!t.edit_mode},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.task,"class_level_key",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("1-3")]),s("option",{attrs:{value:"2"}},[t._v("4-6")]),s("option",{attrs:{value:"3"}},[t._v("7-9")]),s("option",{attrs:{value:"4"}},[t._v("10-11")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 text-left"},[s("p",[s("a",{attrs:{href:"/resolver.html?id="+t.task.id,target:"_blank"}},[t._v("Открыть задание")])])]),s("div",{staticClass:"col-6 text-right"},[!1===t.edit_mode?s("p",{staticClass:"button-edit-task",on:{click:function(e){t.edit_mode=!0}}},[t._v("Изменить задачу")]):t._e(),!0===t.edit_mode?s("p",{staticClass:"button-edit-task",on:{click:t.completeEditTask}},[t._v("Сохранить")]):t._e()])]),s("hr"),!1===t.edit_mode?[t.lock_user?t._e():s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.moderator_comment,expression:"moderator_comment"}],staticClass:"form-control",attrs:{name:"comment",id:"commentForTask",placeholder:"Оставить комментарий"},domProps:{value:t.moderator_comment},on:{input:function(e){e.target.composing||(t.moderator_comment=e.target.value)}}}),s("div",{staticClass:"custom-control custom-checkbox text-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lock_user,expression:"lock_user"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"customCheck1"},domProps:{checked:Array.isArray(t.lock_user)?t._i(t.lock_user,null)>-1:t.lock_user},on:{change:function(e){var s=t.lock_user,a=e.target,r=!!a.checked;if(Array.isArray(s)){var i=null,n=t._i(s,i);a.checked?n<0&&(t.lock_user=s.concat([i])):n>-1&&(t.lock_user=s.slice(0,n).concat(s.slice(n+1)))}else t.lock_user=r}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"customCheck1"}},[t._v("Заблокировать автора")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.lock_user,expression:"lock_user"}],staticClass:"input-group mb-3"},[t._m(2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.time_lock,expression:"time_lock"}],staticClass:"custom-select",attrs:{id:"select-lock-user"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.time_lock=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"forever"}},[t._v("Навсегда")]),s("option",{attrs:{value:"1d"}},[t._v("День")]),s("option",{attrs:{value:"3d"}},[t._v("3 дня")]),s("option",{attrs:{value:"week"}},[t._v("Неделя")]),s("option",{attrs:{value:"month"}},[t._v("Месяц")])])]),s("div",{staticClass:"buttons"},[t.lock_user?t._e():s("div",{staticClass:"main-buttons"},[s("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.$emit("confirm-task",t.moderator_comment)}}},[t._v("Одобрить")]),s("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.$emit("reject-task",t.moderator_comment)}}},[t._v("Отклонить")])]),t.lock_user?t._e():s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.$emit("moder-delete-task")}}},[t._v("Удалить задачу")]),t.lock_user?s("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(e){return t.$emit("moder-lock-author",t.time_lock)}}},[t._v("Заблокировать и удалить задачу")]):t._e()])]:t._e()],2)])},gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"selectDifficulty"}},[t._v("Сложность")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"selectClass"}},[t._v("Классы")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-group-prepend"},[s("label",{staticClass:"input-group-text",attrs:{for:"select-lock-user"}},[t._v("Время блокировки")])])}],Ct={name:"TaskModeration",props:{check_task:{type:Object}},data:function(){return{lock_user:!1,time_lock:"forever",edit_mode:!1,task:{id:"",author:"",author_id:"",difficulty:"",class_level_key:"",source:"",description:""},moderator_comment:""}},methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["ADMIN_EDIT_TASK"])),{},{completeEditTask:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_EDIT_TASK(t.task);case 2:s=e.sent,s&&(t.edit_mode=!1,t.$emit("moder-edit-task"),window.myAlert("Задание изменено"));case 4:case"end":return e.stop()}}),e)})))()}}),watch:{check_task:function(){this.task.id=this.check_task.id,this.task.author=this.check_task.author,this.task.author_id=this.check_task.author_id,this.task.difficulty=this.check_task.difficulty,this.task.class_level_key=this.check_task.class_level_key,this.task.source=this.check_task.source,this.task.description=this.check_task.description}}},bt=Ct,Tt=(s("cee1"),Object(f["a"])(bt,wt,gt,!1,null,"345590d4",null)),St=Tt.exports,At=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"confirm-delete-users"},[s("h2",[t._v("Вы уверены, что хотите удалить пользователей("+t._s(t.checkedUsers.length)+"):")]),s("ul",t._l(t.checkedUsers,(function(e,a){return s("li",{key:e.id},[t._v(" "+t._s(a+1)+") "+t._s(e.fio)+" - "+t._s(e.role_str)+" "),"no"!==e.powers_key?s("span",[t._v("("+t._s(e.powers_str)+")")]):t._e()])})),0),s("hr"),s("div",{staticClass:"buttons"},[s("div",{staticClass:"main-buttons"},[s("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.$emit("confirm-delete")}}},[t._v("Подтвердить")]),s("button",{staticClass:"btn btn-info",on:{click:function(e){return t.$emit("cancel-delete")}}},[t._v("Отменить")])])])])},Et=[],yt={name:"ConfirmDeleteUsers",props:{checkedUsers:{type:Array}}},xt=yt,Ot=(s("dc13"),Object(f["a"])(xt,At,Et,!1,null,"1ed0d181",null)),Rt=Ot.exports,It={name:"ModalsWrapper",props:{type_modal:{type:String},user:{type:Object},edit_task:{type:Object},check_task:{type:Object},checked_users:{type:Array}},components:{AddUser:nt,EditUser:_t,EditTask:kt,TaskModeration:St,ConfirmDeleteUsers:Rt},methods:{editUser:function(t){this.$emit("edit-user",t)},completeEditTask:function(t){this.$emit("complete-edit-task",t)},lockAuthor:function(t){this.$emit("lock-author",t)},moderLockAuthor:function(t){this.$emit("moder-lock-author",t)},moderConfirmTask:function(t){this.$emit("confirm-task",t)},moderRejectTask:function(t){this.$emit("reject-task",t)}}},Nt=It,Ut=(s("a29e"),Object(f["a"])(Nt,Y,tt,!1,null,"cbae6b76",null)),$t=Ut.exports,jt={name:"MainModerator",data:function(){return{pages:!1,page:1,show_modal_moderation:!1,check_task:{}}},components:{ImprovedPaginator:z,ModalsWrapper:$t},computed:Object(u["a"])({},Object(d["c"])(["USER_POWERS","ADMIN_TASKS_FOR_CHECK","COUNT","PAGES_NEW_TASKS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","ADMIN_GET_TASKS_FOR_CHECK","ADMIN_LOCK_TASK_AUTHOR","ADMIN_DELETE_TASK","ADMIN_CONFIRM_REJECT_TASK","GET_COUNT"])),{},{getPage:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.ADMIN_GET_TASKS_FOR_CHECK(t);case 2:e.page=t;case 3:case"end":return s.stop()}}),s)})))()},openModerationTask:function(t){this.check_task=t,this.show_modal_moderation=!0},moderEditTask:function(){this.ADMIN_GET_TASKS_FOR_CHECK(this.page)},moderLockAuthor:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={timeLock:t,userId:e.check_task.author_id,taskId:e.check_task.id},s.next=3,e.ADMIN_LOCK_TASK_AUTHOR(a);case 3:if(r=s.sent,!r){s.next=9;break}return e.show_modal_moderation=!1,s.next=8,e.ADMIN_GET_TASKS_FOR_CHECK(e.page);case 8:window.myAlert("Пользователь заблокирован, задание удалено.");case 9:case"end":return s.stop()}}),s)})))()},moderDeleteTask:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_DELETE_TASK(t.check_task.id);case 2:if(s=e.sent,!s){e.next=8;break}return t.show_modal_moderation=!1,e.next=7,t.ADMIN_GET_TASKS_FOR_CHECK(t.page);case 7:window.myAlert("Задание удалено");case 8:case"end":return e.stop()}}),e)})))()},confirmTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={taskId:e.check_task.id,typeAction:"confirm",moderComment:t},s.next=3,e.ADMIN_CONFIRM_REJECT_TASK(a);case 3:if(r=s.sent,!r){s.next=9;break}return s.next=7,e.ADMIN_GET_TASKS_FOR_CHECK(e.page);case 7:e.show_modal_moderation=!1,window.myAlert("Задача одобрена.");case 9:case"end":return s.stop()}}),s)})))()},rejectTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={taskId:e.check_task.id,typeAction:"reject",moderComment:t},s.next=3,e.ADMIN_CONFIRM_REJECT_TASK(a);case 3:if(r=s.sent,!r){s.next=9;break}return s.next=7,e.ADMIN_GET_TASKS_FOR_CHECK(e.page);case 7:e.show_modal_moderation=!1,window.myAlert("Задача отклонена.");case 9:case"end":return s.stop()}}),s)})))()}}),created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:"admin"!==t.USER_POWERS&&"moderator"!==t.USER_POWERS&&(window.location.href="/");case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_TASKS_FOR_CHECK(t.page);case 2:return e.next=4,t.GET_COUNT();case 4:t.pages=t.PAGES_NEW_TASKS;case 5:case"end":return e.stop()}}),e)})))()}},Ft=jt,Pt=(s("cb95"),Object(f["a"])(Ft,X,Q,!1,null,"eab714c0",null)),Dt=Pt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"admin"===t.USER_POWERS?s("div",{staticClass:"main-users container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"main-users__menu col-3"},[s("p",[t._v("Выберите группу пользователей:")]),s("ul",[s("li",{class:"all"===t.current_filter?"current_filter":"",on:{click:function(e){t.current_filter="all"}}},[t._v("Все пользователи("+t._s(t.COUNT.all_users)+")")]),s("li",{class:"admins"===t.current_filter?"current_filter":"",on:{click:function(e){t.current_filter="admins"}}},[t._v("Администраторы("+t._s(t.COUNT.admins)+")")]),s("li",{class:"moderators"===t.current_filter?"current_filter":"",on:{click:function(e){t.current_filter="moderators"}}},[t._v("Модераторы("+t._s(t.COUNT.moderators)+")")]),s("li",{class:"teachers"===t.current_filter?"current_filter":"",on:{click:function(e){t.current_filter="teachers"}}},[t._v("Преподаватели("+t._s(t.COUNT.teachers)+")")]),s("li",{class:"pupils"===t.current_filter?"current_filter":"",on:{click:function(e){t.current_filter="pupils"}}},[t._v("Ученики("+t._s(t.COUNT.students)+")")])]),s("div",{staticClass:"add-user"},[s("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){t.show_modal_add_user=!0}}},[t._v("Добавить пользователя")])])]),s("div",{staticClass:"main-users__content col-9"},[s("div",{staticClass:"main-users__content-header"},[s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_field,expression:"search_field"}],attrs:{type:"text",placeholder:"Поиск по ФИО..."},domProps:{value:t.search_field},on:{input:function(e){e.target.composing||(t.search_field=e.target.value)}}}),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-dark btn-sm",on:{click:t.searchUsers}},[t._v("Найти")]),t.active_search?s("button",{staticClass:"btn btn-warning btn-sm",on:{click:t.cancelSearch}},[t._v("Отменить")]):t._e()])]),s("div",{staticClass:"delete-items"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteUsers}},[t._v("Удалить")])])]),s("table",[t._m(0),s("tbody",t._l(t.filter_tasks,(function(e){return s("tr",{key:e.id,on:{click:function(s){return t.showModalEditUser(e)}}},[s("td",[s("div",{staticClass:"custom-control custom-checkbox",on:{click:function(t){t.stopPropagation()}}},[s("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"checkUser-"+e.id},on:{click:function(s){return t.checkUser(e.id)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"checkUser-"+e.id}})])]),s("td",[t._v(t._s(e.fio))]),s("td",[t._v(t._s(e.role_str))]),s("td",[t._v(t._s(e.powers_str))]),s("td",[t._v(t._s(e.date_reg))]),s("td",[t._v(t._s(e.lock?e.lock_forever?"Навсегда":"До "+e.lock_time:"Нет"))])])})),0)])])]),s("transition",{attrs:{name:"fade"}},[s("ModalsWrapper",{directives:[{name:"show",rawName:"v-show",value:t.show_modal_add_user,expression:"show_modal_add_user"}],attrs:{type_modal:"add_user"},on:{"close-modal":function(e){t.show_modal_add_user=!1},"add-user-complete":t.addNewUserComplete}})],1),s("transition",{attrs:{name:"fade"}},[s("ModalsWrapper",{directives:[{name:"show",rawName:"v-show",value:t.show_modal_edit_user,expression:"show_modal_edit_user"}],attrs:{type_modal:"edit_user",user:t.edit_user},on:{"close-modal":function(e){t.show_modal_edit_user=!1},"delete-user":t.deleteUser,"edit-user":t.editUser}})],1),s("transition",{attrs:{name:"fade"}},[s("ModalsWrapper",{directives:[{name:"show",rawName:"v-show",value:t.show_modal_delete_users,expression:"show_modal_delete_users"}],attrs:{type_modal:"confirm_delete_users",checked_users:t.checkedUsers},on:{"close-modal":function(e){t.show_modal_delete_users=!1},"confirm-delete":t.confirmDeleteUsers,"cancel-delete":t.cancelDeleteUsers}})],1)],1):t._e()},Gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Выбрать")]),s("th",[t._v("ФИО")]),s("th",[t._v("Роль")]),s("th",[t._v("Доп. Полномочия")]),s("th",[t._v("Дата Регистрации")]),s("th",[t._v("Бан")])])])}],Kt=s("b85c"),Lt=(s("a434"),s("2ca0"),{name:"Users",data:function(){return{show_modal_add_user:!1,show_modal_edit_user:!1,show_modal_delete_users:!1,edit_user:{},checkedUsers:[],filter_tasks:[],current_filter:"all",search_field:"",active_search:!1}},components:{ModalsWrapper:$t},computed:Object(u["a"])({},Object(d["c"])(["ADMIN_USERS","USER_POWERS","COUNT"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["ADMIN_GET_USERS","ADMIN_DELETE_USERS","ADMIN_EDIT_USER","IS_AUTHENTICATED","GET_COUNT"])),{},{showModalEditUser:function(t){this.show_modal_edit_user=!0,this.edit_user=t},addNewUserComplete:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_USERS();case 2:s=e.sent,s&&(t.filter_tasks=t.ADMIN_USERS),t.show_modal_add_user=!1,window.myAlert("Пользователь добавлен!");case 6:case"end":return e.stop()}}),e)})))()},checkUser:function(t){var e,s=document.getElementById("checkUser-".concat(t)),a={},r=Object(Kt["a"])(this.ADMIN_USERS);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.id===t&&(a=i)}}catch(o){r.e(o)}finally{r.f()}if(s.checked)this.checkedUsers.push(a);else{var n=this.checkedUsers.indexOf(a);-1!==n&&this.checkedUsers.splice(n,1)}},deleteUsers:function(){0!==this.checkedUsers.length&&(this.show_modal_delete_users=!0)},confirmDeleteUsers:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s,a,r,i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=[],a=Object(Kt["a"])(t.checkedUsers);try{for(a.s();!(r=a.n()).done;)i=r.value,s.push(i.id)}catch(c){a.e(c)}finally{a.f()}return e.next=5,t.ADMIN_DELETE_USERS(s);case 5:if(n=e.sent,!n){e.next=15;break}return t.show_modal_delete_users=!1,window.myAlert("Пользователи удалены!"),e.next=11,t.ADMIN_GET_USERS();case 11:o=e.sent,o&&(t.filter_tasks=t.ADMIN_USERS),t.show_modal_edit_user=!1,t.current_filter="all";case 15:case"end":return e.stop()}}),e)})))()},cancelDeleteUsers:function(){this.show_modal_delete_users=!1},deleteUser:function(){this.checkedUsers=[this.edit_user],this.show_modal_delete_users=!0},searchUsers:function(){var t,e=[],s=Object(Kt["a"])(this.filter_tasks);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.fio.startsWith(this.search_field.trim())&&e.push(a)}}catch(r){s.e(r)}finally{s.f()}this.active_search=!0,this.filter_tasks=e},cancelSearch:function(){this.filter_tasks=this.ADMIN_USERS,this.search_field="",this.active_search=!1},editUser:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.ADMIN_EDIT_USER(t);case 2:return a=s.sent,a&&(e.show_modal_edit_user=!1),s.next=6,e.ADMIN_GET_USERS();case 6:r=s.sent,r&&(e.filter_tasks=e.ADMIN_USERS),e.current_filter="all";case 9:case"end":return s.stop()}}),s)})))()}}),watch:{current_filter:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var s,a,r,i,n,o,c,l,u,d,_,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("all"!==e){t.next=3;break}return this.filter_tasks=this.ADMIN_USERS,t.abrupt("return",void 0);case 3:this.filter_tasks=[],t.t0=e,t.next="admins"===t.t0?7:"moderators"===t.t0?10:"teachers"===t.t0?13:"pupils"===t.t0?16:19;break;case 7:s=Object(Kt["a"])(this.ADMIN_USERS);try{for(s.s();!(a=s.n()).done;)r=a.value,"admin"===r.powers_key&&this.filter_tasks.push(r)}catch(f){s.e(f)}finally{s.f()}return t.abrupt("break",19);case 10:i=Object(Kt["a"])(this.ADMIN_USERS);try{for(i.s();!(n=i.n()).done;)o=n.value,"moderator"===o.powers_key&&this.filter_tasks.push(o)}catch(f){i.e(f)}finally{i.f()}return t.abrupt("break",19);case 13:c=Object(Kt["a"])(this.ADMIN_USERS);try{for(c.s();!(l=c.n()).done;)u=l.value,2===u.role_key&&"no"===u.powers_key&&this.filter_tasks.push(u)}catch(f){c.e(f)}finally{c.f()}return t.abrupt("break",19);case 16:d=Object(Kt["a"])(this.ADMIN_USERS);try{for(d.s();!(_=d.n()).done;)m=_.value,1===m.role_key&&"no"===m.powers_key&&this.filter_tasks.push(m)}catch(f){d.e(f)}finally{d.f()}return t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:"admin"!==t.USER_POWERS&&(window.location.href="/");case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_USERS();case 2:return s=e.sent,s&&(t.filter_tasks=t.ADMIN_USERS),e.next=6,t.GET_COUNT();case 6:case"end":return e.stop()}}),e)})))()}}),Ht=Lt,Wt=(s("f7a9"),Object(f["a"])(Ht,Mt,Gt,!1,null,"15c3982b",null)),Vt=Wt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return"admin"===t.USER_POWERS||"moderator"===t.USER_POWERS?s("div",{staticClass:"main-moderator-and-tasks container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("h1",[t._v("Все задачи("+t._s(t.COUNT.all_tasks)+")")]),s("p",[s("router-link",{attrs:{to:"/moderation",name:"moderation"}},[t._v("Открыть новые задачи")])],1),s("table",[t._m(0),s("tbody",t._l(t.ADMIN_TASKS,(function(e){return s("tr",{key:e.id,on:{click:function(s){return t.showModalEdit(e)}}},[s("td",[t._v(t._s(e.create_date)),s("br"),t._v(t._s(e.create_time))]),s("td",[t._v("Задача №"+t._s(e.id))]),s("td",[t._v(t._s(e.real_creator===e.author?e.author:e.author+" ("+e.real_creator+")"))]),s("td",[t._v(t._s(e.number_recheck))]),s("td",[t._v(t._s(e.status))]),s("td",[t._v(t._s(e.difficulty))]),s("td",[t._v(t._s(e.class_level))]),s("td",[t._v(t._s(e.source))])])})),0)])])]),t._v(", "),t.page&&t.pages?s("ImprovedPaginator",{attrs:{currentPage:t.page,countPages:t.pages},on:{getPage:t.getPage}}):t._e(),s("transition",{attrs:{name:"fade"}},[s("ModalsWrapper",{directives:[{name:"show",rawName:"v-show",value:t.show_modal_edit,expression:"show_modal_edit"}],attrs:{type_modal:"edit_task",edit_task:t.edit_task_obj},on:{"close-modal":function(e){t.show_modal_edit=!1},"complete-edit-task":t.completeEditTask,"delete-task":t.deleteTask,"lock-author":t.lockAuthor}})],1)],1):t._e()},Zt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Добавлено")]),s("th",[t._v("Название")]),s("th",[t._v("Автор")]),s("th",[t._v("Перепроверок")]),s("th",[t._v("Статус")]),s("th",[t._v("Сложность")]),s("th",[t._v("Классы")]),s("th",[t._v("Источник")])])])}],qt={name:"Tasks",data:function(){return{pages:!1,page:1,show_modal_edit:!1,edit_task_obj:{}}},components:{ImprovedPaginator:z,ModalsWrapper:$t},computed:Object(u["a"])({},Object(d["c"])(["USER_POWERS","ADMIN_TASKS","COUNT","PAGES_ALL_TASKS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["ADMIN_GET_TASKS","IS_AUTHENTICATED","ADMIN_EDIT_TASK","ADMIN_DELETE_TASK","ADMIN_LOCK_TASK_AUTHOR","GET_COUNT"])),{},{getPage:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.ADMIN_GET_TASKS(t);case 2:e.page=t;case 3:case"end":return s.stop()}}),s)})))()},showModalEdit:function(t){this.show_modal_edit=!0,this.edit_task_obj=t},completeEditTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.ADMIN_EDIT_TASK(t);case 2:if(a=s.sent,!a){s.next=8;break}return e.show_modal_edit=!1,s.next=7,e.ADMIN_GET_TASKS(e.page);case 7:window.myAlert("Задание изменено");case 8:case"end":return s.stop()}}),s)})))()},deleteTask:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_DELETE_TASK(t.edit_task_obj.id);case 2:if(s=e.sent,!s){e.next=8;break}return t.show_modal_edit=!1,e.next=7,t.ADMIN_GET_TASKS(t.page);case 7:window.myAlert("Задание удалено");case 8:case"end":return e.stop()}}),e)})))()},lockAuthor:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={timeLock:t,userId:e.edit_task_obj.author_id,taskId:e.edit_task_obj.id},s.next=3,e.ADMIN_LOCK_TASK_AUTHOR(a);case 3:if(r=s.sent,!r){s.next=9;break}return e.show_modal_edit=!1,s.next=8,e.ADMIN_GET_TASKS(e.page);case 8:window.myAlert("Пользователь заблокирован, задание удалено.");case 9:case"end":return s.stop()}}),s)})))()}}),created:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:"admin"!==t.USER_POWERS&&"moderator"!==t.USER_POWERS&&(window.location.href="/");case 3:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ADMIN_GET_TASKS(t.page);case 2:return e.next=4,t.GET_COUNT();case 4:t.pages=t.PAGES_ALL_TASKS;case 5:case"end":return e.stop()}}),e)})))()}},Jt=qt,Bt=(s("3422"),Object(f["a"])(Jt,zt,Zt,!1,null,"1c203d88",null)),Xt=Bt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.TASKS.length?a("div",{staticClass:"tasks"},[a("div",{staticClass:"border-bottom mx-0 row"},[a("div",{staticClass:"px-2 col-2"},[t._v("Название задачи")]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(1)},mouseenter:function(e){return t.showFilter(1)}}},[a("div",{staticClass:"filter_selector dificult",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(1,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(1,1)}}},[t._v("1")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(1,2)}}},[t._v("2")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(1,3)}}},[t._v("3")])])]),t._v(" "+t._s(t.filter_difficult)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(2)},mouseenter:function(e){return t.showFilter(2)}}},[a("div",{staticClass:"filter_selector class",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(2,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(2,1)}}},[t._v("1-3")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(2,2)}}},[t._v("4-6")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(2,3)}}},[t._v("7-9")]),a("div",{attrs:{name:"4"},on:{click:function(e){return t.setFilter(2,4)}}},[t._v("10-11")])])]),t._v(" "+t._s(t.filter_class_str)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-2"},[t._v("Описание")]),a("div",{staticClass:"px-2 col-2",on:{click:function(e){return t.showFilter(3)},mouseenter:function(e){return t.showFilter(3)}}},[a("div",{staticClass:"filter_selector author",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(3,"")}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),t._l(t.AUTHORS,(function(e){return a("div",{key:e.id,attrs:{name:e.id},on:{click:function(s){return t.setFilter(3,e.id)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("div",{staticClass:"author_block d-inline-flex"},[t._v(t._s(t.filter_author_str))]),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-2"},[t._v("Источник")]),a("div",{staticClass:"px-2 col-1"},[t._v("Просмотров/Решено")]),a("div",{staticClass:"px-2 col text-center"},[t._v("Действия")])]),t._l(t.TASKS,(function(e){return a("div",{key:e.id,staticClass:"mx-0 row",on:{click:function(s){return t.resolveTask(e.id)}}},[a("div",{staticClass:"px-2 col-2"},[t._v("Задача № "+t._s(e.id))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskDifficulty(e.dificulty)))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskClass(e.class_level)))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.description))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.author_name))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.source_name))]),a("div",{staticClass:"px-2 col-1"},[t._v(" "+t._s(e.views)+" / "+t._s(e.resolved))]),a("div",{staticClass:"px-2 col text-center"},[a("img",{staticClass:"mr-3",attrs:{title:"скопировать ссылку на эту задачу",src:s("87d1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.showTaskLink(e.id)}}}),a("img",{class:e.favorite?"":"gray_icon",attrs:{title:e.favorite?"удалить задачу из избранного":"добавить задачу в избранное",src:s("04a1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.toggleFavoriteTask(e)}}})])])}))],2):a("div",{staticClass:"mt-4 text-center"},[t._v(" Задачи не найдены."),a("br"),a("br"),a("span",{staticClass:"the_link",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")])]),a("Pagination",{attrs:{pages:t.pages,show_pages:t.show_pages,request_page:t.page+1},on:{getPage:t.getTasks}})],1)},Yt=[],te=(s("a9e3"),s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-center mb-12 my-4 pagination"},[s("div",{staticClass:"pages page_first",attrs:{title:"открыть первую страницу"},on:{click:function(e){return t.getPage(0)}}}),t._l(t.show_pages,(function(e){return s("div",{key:e},[s("div",{class:[e===t.request_page?"active":"","page"],on:{click:function(s){return t.getPage(e-1)}}},[t._v(" "+t._s(e)+" ")])])})),s("div",{staticClass:"pages page_last",attrs:{title:"открыть последнюю страницу"},on:{click:function(e){return t.getPage(t.pages.length-1)}}})],2)])}),ee=[],se={name:"Pagination",props:["request_page","pages","show_pages"],data:function(){return{number_of_pages_to_view:4}},methods:{getPage:function(t){this.$emit("getPage",t)}}},ae=se,re=(s("58c3"),Object(f["a"])(ae,te,ee,!1,null,"360a23ae",null)),ie=re.exports,ne={name:"Catalog",components:{Pagination:ie},data:function(){return{pages:[],show_pages:[],limit:13,page:0,user_auth:!1,filters:!1,filter_difficult:"Сложность",filter_class_str:"Классы",filter_class:0,filter_author:0,filter_author_str:"Автор"}},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.GET_AUTHORS(),e.next=3,t.IS_AUTHENTICATED();case 3:if(s=e.sent,!s){e.next=12;break}return console.log(s),e.next=8,t.GET_USER_FAVORITE_TASKS();case 8:a=e.sent,a&&t.getTasks(0),e.next=13;break;case 12:t.getTasks(0);case 13:case"end":return e.stop()}}),e)})))()},computed:Object(u["a"])({},Object(d["c"])(["USER_IS_AUTHENTICATED","AUTHORS","FAVORITE_TASKS","TASKS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","GET_AUTHORS","GET_USER_FAVORITE_TASKS","GET_TASKS","TOGGLE_FAVORITE_TASK"])),{},{toggleFavoriteTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.TOGGLE_FAVORITE_TASK(t),!a){s.next=6;break}return s.next=4,a.then((function(t){return Number(t.taskId)}));case 4:r=s.sent,e.toggleTaskFavor(r);case 6:case"end":return s.stop()}}),s)})))()},getTasks:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a="/api/get_tasks?page="+e.page+"&limit="+e.limit,e.filters&&(a+=e.getFilters()),e.page=t,s.next=5,e.GET_TASKS({url:a,page:t});case 5:r=s.sent,r&&(e.pages=r.pages,e.show_pages=r.showPages);case 7:case"end":return s.stop()}}),s)})))()},resolveTask:function(t){window.location.href="/resolver.html?id="+t},showTaskLink:function(t){var e=window.location.origin+"/resolver.html?id="+t,s=window.$("#modal_link input:first");s.val(e),window.$("#modal_link").modal("show"),window.setTimeout(this.copyPasteLink,300)},toggleTaskFavor:function(t){var e,s=Object(Kt["a"])(this.TASKS);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(a.id===t){a.favorite=!a.favorite;break}}}catch(n){s.e(n)}finally{s.f()}for(var r=!0,i=0;i<this.FAVORITE_TASKS.length;i++)if(this.FAVORITE_TASKS[i].id===t){this.FAVORITE_TASKS.splice(i,1),r=!1;break}r&&this.FAVORITE_TASKS.push({id:t})},copyPasteLink:function(){var t=window.$("#modal_link input:first"),e=window.$("#modal_link span:first");t.select(),document.execCommand("copy")?e.html("Ссылка на задачу скопирована в буфер обмена"):e.html("Для копирования ссылки в буфер обмена кликните по ней, затем нажмите CTRL-C и ENTER"),t.blur()},getTaskDifficulty:function(t){var e=["","1","2","3"];return e[t]},getTaskClass:function(t){var e=["","1-3","4-6","7-9","10-11"];return e[t]},getFilters:function(){var t="&filters=true";if("Сложность"!==this.filter_difficult&&(t+="&dificulty="+this.filter_difficult),this.filter_class&&(t+="&class_level="+this.filter_class),this.filter_author)for(var e=0;e<this.AUTHORS.length;e++)if(this.AUTHORS[e].id===this.filter_author){this.AUTHORS[e].user_id?t+="&user_id="+this.AUTHORS[e].user_id:t+="&author_id="+this.filter_author;break}return t},showFilter:function(t){switch(t){case 1:window.$(".dificult:first").css("display","block");break;case 2:window.$(".class:first").css("display","block");break;case 3:window.$(".author:first").css("display","block");break}},hideFilters:function(){window.$(".filter_selector").css("display","none")},setFilter:function(t,e){window.setTimeout(this.hideFilters,50);var s=["Классы","1-3","4-6","7-9","10-11"];switch(t){case 1:this.filter_difficult=e,window.$(".dificult>div>div").removeClass("my_bold"),0===e?this.filter_difficult="Сложность":window.$(".dificult>div>div[name="+e+"]").addClass("my_bold");break;case 2:this.filter_class=e,this.filter_class_str=s[e],window.$(".class>div>div").removeClass("my_bold"),0!==e&&window.$(".class>div>div[name="+e+"]").addClass("my_bold");break;case 3:if(this.filter_author=e,window.$(".author>div>div").removeClass("my_bold"),e){for(var a=0;a<this.AUTHORS.length;a++)if(this.AUTHORS[a].id===e){this.filter_author_str=this.AUTHORS[a].name,window.$(".author>div>div[name="+e+"]").addClass("my_bold");break}}else this.filter_author_str="Автор";break;default:this.filter_author_str="Автор",this.filter_author=0,this.filter_class=0,this.filter_class_str="Классы",this.filter_difficult="Сложность",window.$(".dificult>div>div").removeClass("my_bold"),window.$(".class>div>div").removeClass("my_bold"),window.$(".author>div>div").removeClass("my_bold");break}this.filters=!(!this.filter_class&&"Сложность"===this.filter_difficult&&!this.filter_author),this.getTasks(0)}})},oe=ne,ce=Object(f["a"])(oe,Qt,Yt,!1,null,null,null),le=ce.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.TASKS.length?a("div",{staticClass:"tasks"},[a("div",{staticClass:"border-bottom mx-0 row"},[a("div",{staticClass:"px-2 col-2"},[t._v("Название задачи")]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(1)},mouseenter:function(e){return t.showFilter(1)}}},[a("div",{staticClass:"filter_selector dificult",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(1,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(1,1)}}},[t._v("1")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(1,2)}}},[t._v("2")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(1,3)}}},[t._v("3")])])]),t._v(" "+t._s(t.filter_difficult)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(2)},mouseenter:function(e){return t.showFilter(2)}}},[a("div",{staticClass:"filter_selector class",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(2,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(2,1)}}},[t._v("1-3")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(2,2)}}},[t._v("4-6")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(2,3)}}},[t._v("7-9")]),a("div",{attrs:{name:"4"},on:{click:function(e){return t.setFilter(2,4)}}},[t._v("10-11")])])]),t._v(" "+t._s(t.filter_class_str)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-2"},[t._v("Описание")]),a("div",{staticClass:"px-2 col-2",on:{click:function(e){return t.showFilter(3)},mouseenter:function(e){return t.showFilter(3)}}},[a("div",{staticClass:"filter_selector author",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(3,"")}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),t._l(t.AUTHORS,(function(e){return a("div",{key:e.id,attrs:{name:e.id},on:{click:function(s){return t.setFilter(3,e.id)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("div",{staticClass:"author_block d-inline-flex"},[t._v(t._s(t.filter_author_str))]),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-2"},[t._v("Источник")]),a("div",{staticClass:"px-2 col-1"},[t._v("Просмотров/Решено")]),a("div",{staticClass:"px-2 col text-center"},[t._v("Действия")])]),t._l(t.TASKS,(function(e){return a("div",{key:e.id,staticClass:"mx-0 row",on:{click:function(s){return t.resolveTask(e.id)}}},[a("div",{staticClass:"px-2 col-2"},[t._v("Задача № "+t._s(e.id))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskDifficulty(e.dificulty)))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskClass(e.class_level)))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.description))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.author_name))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.source_name))]),a("div",{staticClass:"px-2 col-1"},[t._v(" "+t._s(e.views)+" / "+t._s(e.resolved))]),a("div",{staticClass:"px-2 col text-center"},[a("img",{staticClass:"mr-3",attrs:{title:"скопировать ссылку на эту задачу",src:s("87d1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.showTaskLink(e.id)}}}),a("img",{class:e.favorite?"":"gray_icon",attrs:{title:e.favorite?"удалить задачу из избранного":"добавить задачу в избранное",src:s("04a1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.toggleFavoriteTask(e)}}})])])}))],2):a("div",{staticClass:"mt-4 text-center"},[t._v(" Задачи не найдены."),a("br"),a("br"),a("span",{staticClass:"the_link",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")])]),a("Pagination",{attrs:{pages:t.pages,show_pages:t.show_pages,request_page:t.page+1},on:{getPage:t.getTasks}})],1)},de=[],_e={name:"Favorites",components:{Pagination:ie},data:function(){return{pages:[],show_pages:[],limit:13,page:0,filters:!1,filter_difficult:"Сложность",filter_class_str:"Классы",filter_class:0,filter_author:0,filter_author_str:"Автор"}},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:if(s=e.sent,!s){e.next=14;break}return e.next=6,t.GET_AUTHORS();case 6:if(a=e.sent,!a){e.next=12;break}return e.next=10,t.GET_USER_FAVORITE_TASKS();case 10:r=e.sent,r&&t.getTasks(0);case 12:e.next=15;break;case 14:window.$("#auth").modal("show");case 15:case"end":return e.stop()}}),e)})))()},computed:Object(u["a"])({},Object(d["c"])(["TASKS","FAVORITE_TASKS","AUTHORS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","GET_AUTHORS","GET_USER_FAVORITE_TASKS","GET_TASKS","TOGGLE_FAVORITE_TASK"])),{},{getTasks:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a="/api/get_tasks?favorite=yes&page="+e.page+"&limit="+e.limit,e.filters&&(a+=e.getFilters()),e.page=t,s.next=5,e.GET_TASKS({url:a,page:t});case 5:r=s.sent,r&&(e.pages=r.pages,e.show_pages=r.showPages);case 7:case"end":return s.stop()}}),s)})))()},toggleFavoriteTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.TOGGLE_FAVORITE_TASK(t),!a){s.next=6;break}return s.next=4,a.then((function(t){return Number(t.taskId)}));case 4:r=s.sent,e.toggleTaskFavor(r);case 6:case"end":return s.stop()}}),s)})))()},toggleTaskFavor:function(t){var e,s=Object(Kt["a"])(this.TASKS);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(a.id===t){a.favorite=!a.favorite;break}}}catch(n){s.e(n)}finally{s.f()}for(var r=!0,i=0;i<this.FAVORITE_TASKS.length;i++)if(this.FAVORITE_TASKS[i].id===t){this.FAVORITE_TASKS.splice(i,1),r=!1;break}r&&this.FAVORITE_TASKS.push({id:t})},resolveTask:function(t){window.location.href="/resolver.html?id="+t},showTaskLink:function(t){var e=window.location.origin+"/resolver.html?id="+t,s=window.$("#modal_link input:first");s.val(e),window.$("#modal_link").modal("show"),window.setTimeout(this.copyPasteLink,300)},copyPasteLink:function(){var t=window.$("#modal_link input:first"),e=window.$("#modal_link span:first");t.select(),document.execCommand("copy")?e.html("Ссылка на задачу скопирована в буфер обмена"):e.html("Для копирования ссылки в буфер обмена кликните по ней, затем нажмите CTRL-C и ENTER"),t.blur()},getTaskDifficulty:function(t){var e=["","1","2","3"];return e[t]},getTaskClass:function(t){var e=["","1-3","4-6","7-9","10-11"];return e[t]},getFilters:function(){var t="&filters=true";if("Сложность"!==this.filter_difficult&&(t+="&dificulty="+this.filter_difficult),this.filter_class&&(t+="&class_level="+this.filter_class),this.filter_author)for(var e=0;e<this.AUTHORS.length;e++)if(this.AUTHORS[e].id===this.filter_author){this.AUTHORS[e].user_id?t+="&user_id="+this.AUTHORS[e].user_id:t+="&author_id="+this.filter_author;break}return t},setFilter:function(t,e){window.setTimeout(this.hideFilters,50);var s=["Классы","1-3","4-6","7-9","10-11"];switch(t){case 1:this.filter_difficult=e,window.$(".dificult>div>div").removeClass("my_bold"),0===e?this.filter_difficult="Сложность":window.$(".dificult>div>div[name="+e+"]").addClass("my_bold");break;case 2:this.filter_class=e,this.filter_class_str=s[e],window.$(".class>div>div").removeClass("my_bold"),0!==e&&window.$(".class>div>div[name="+e+"]").addClass("my_bold");break;case 3:if(this.filter_author=e,window.$(".author>div>div").removeClass("my_bold"),e){for(var a=0;a<this.AUTHORS.length;a++)if(this.AUTHORS[a].id===e){this.filter_author_str=this.AUTHORS[a].name,window.$(".author>div>div[name="+e+"]").addClass("my_bold");break}}else this.filter_author_str="Автор";break;default:this.filter_author_str="Автор",this.filter_author=0,this.filter_class=0,this.filter_class_str="Классы",this.filter_difficult="Сложность",window.$(".dificult>div>div").removeClass("my_bold"),window.$(".class>div>div").removeClass("my_bold"),window.$(".author>div>div").removeClass("my_bold");break}this.filters=!(!this.filter_class&&"Сложность"===this.filter_difficult&&!this.filter_author),this.getTasks(0)},showFilter:function(t){switch(t){case 1:window.$(".dificult:first").css("display","block");break;case 2:window.$(".class:first").css("display","block");break;case 3:window.$(".author:first").css("display","block");break}},hideFilters:function(){window.$(".filter_selector").css("display","none")}})},me=_e,fe=Object(f["a"])(me,ue,de,!1,null,null,null),ve=fe.exports,pe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},he=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my404"},[s("div",{staticClass:"dino"}),s("div",[s("h1",[t._v("404 - документ не найден")]),s("h5",{staticClass:"mt-4"},[t._v("А что это Вы тут делаете?")])])])}],ke={name:"My404"},we=ke,ge=Object(f["a"])(we,pe,he,!1,null,null,null),Ce=ge.exports,be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my404"},[s("div",{staticClass:"dino"}),s("div",[s("h1",[t._v("Подтверждение регистрации")]),s("h5",{staticClass:"mt-4"},[t._v(t._s(t.wait_str))])])])},Te=[],Se=(s("ac1f"),s("841c"),{name:"AuthRegConfirm",data:function(){return{wait_str:"ждите..."}},mounted:function(){"?reg_token="!==window.location.search.substring(0,11)||""===window.location.search.substring(11)?window.myAlert("Не указан токен"):this.ajaxRegConfirm(window.location.search.substring(11))},methods:{ajaxRegConfirm:function(t){var e="https://zadachi.matclass.ru/api/auth_reg_confirm?reg_token="+t,s="GET";window.myAjax(s,e,{},this.myCallbackRegConfirm)},myCallbackRegConfirm:function(t,e){t?(this.wait_str="ошибка на сервере",window.myAlert(e.message)):"true"===e.success?(this.wait_str="Поздравляем! Регистрация подтверждена. Вы авторизованы.",window.myAlert(e.message),this.$emit("authUser",e.user)):(this.wait_str="ошибка на сервере",window.myAlert(e.error))}}}),Ae=Se,Ee=Object(f["a"])(Ae,be,Te,!1,null,"55793a83",null),ye=Ee.exports,xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my404"},[s("div",{staticClass:"dino"}),s("div",{staticClass:"text-center w-25 mx-auto"},[t.doing?s("div",[s("h5",{staticClass:"mt-4"},[t._v("Пароль изменен")])]):s("div",[s("h5",{staticClass:"mt-4 errors"},[t._v(t._s(t.error))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_pw,expression:"new_pw"}],staticClass:"mt-4 w-100",attrs:{name:"pw",type:"password",placeholder:"введите новый пароль*"},domProps:{value:t.new_pw},on:{input:function(e){e.target.composing||(t.new_pw=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pw2,expression:"pw2"}],staticClass:"mt-4 w-100",attrs:{name:"pw2",type:"password",placeholder:"повторите новый пароль*"},domProps:{value:t.pw2},on:{input:function(e){e.target.composing||(t.pw2=e.target.value)}}}),s("button",{staticClass:"my-4 mx-auto btn_lt",attrs:{type:"button"},on:{click:function(e){return t.validePW()}}},[t._v("Сменить пароль")])])])])},Oe=[],Re={name:"AuthRegConfirm",data:function(){return{doing:!1,error:"",temp:"",new_pw:"",pw2:""}},mounted:function(){"?temp="!==window.location.search.substring(0,6)||""===window.location.search.substring(6)?window.myAlert("Не указан токен"):this.temp=window.location.search.substring(6)},methods:{ajaxChangePasswordConfirm:function(){var t="https://zadachi.matclass.ru/api/auth_set_new_user_pw",e="POST",s={temp:this.temp,new_pw:this.new_pw};window.myAjax(e,t,s,this.myCallbackChangePasswordConfirm)},myCallbackChangePasswordConfirm:function(t,e){t?this.error="ошибка на сервере":"true"===e.success?(this.doing=!0,this.$emit("authUser",e.user)):(this.error="ошибка",window.myAlert(e.error))},validePW:function(){this.new_pw.length<6?this.error="Пароль должен содержать не менее 6 символов":this.new_pw===this.pw2?(this.ajaxChangePasswordConfirm(),this.error=""):this.error="Пароли различаются"}}},Ie=Re,Ne=Object(f["a"])(Ie,xe,Oe,!1,null,"24cd9268",null),Ue=Ne.exports,$e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.TASKS.length?a("div",{staticClass:"tasks"},[a("div",{staticClass:"border-bottom mx-0 row"},[a("div",{staticClass:"px-2 col-1"},[t._v("Название задачи")]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(1)},mouseenter:function(e){return t.showFilter(1)}}},[a("div",{staticClass:"filter_selector dificult",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(1,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(1,1)}}},[t._v("1")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(1,2)}}},[t._v("2")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(1,3)}}},[t._v("3")])])]),t._v(" "+t._s(t.filter_difficult)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-1 position-relative",on:{click:function(e){return t.showFilter(2)},mouseenter:function(e){return t.showFilter(2)}}},[a("div",{staticClass:"filter_selector class",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(2,0)}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),a("div",{attrs:{name:"1"},on:{click:function(e){return t.setFilter(2,1)}}},[t._v("1-3")]),a("div",{attrs:{name:"2"},on:{click:function(e){return t.setFilter(2,2)}}},[t._v("4-6")]),a("div",{attrs:{name:"3"},on:{click:function(e){return t.setFilter(2,3)}}},[t._v("7-9")]),a("div",{attrs:{name:"4"},on:{click:function(e){return t.setFilter(2,4)}}},[t._v("10-11")])])]),t._v(" "+t._s(t.filter_class_str)+" "),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-2"},[t._v("Описание")]),a("div",{staticClass:"px-2 col-1",on:{click:function(e){return t.showFilter(3)},mouseenter:function(e){return t.showFilter(3)}}},[a("div",{staticClass:"filter_selector author",on:{mouseleave:function(e){return t.hideFilters()}}},[a("div",{staticClass:"py-2"},[a("div",{staticClass:"filter_clear",on:{click:function(e){return t.setFilter(3,"")}}},[t._v("Сбросить фильтр")]),a("div",{staticClass:"filter_clear_all",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")]),t._l(t.AUTHORS,(function(e){return a("div",{key:e.id,attrs:{name:e.id},on:{click:function(s){return t.setFilter(3,e.id)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("div",{staticClass:"author_block d-inline-flex"},[t._v(t._s(t.filter_author_str))]),a("img",{staticClass:"ml-1",attrs:{src:s("3a20"),alt:""}})]),a("div",{staticClass:"px-2 col-1"},[t._v("Источник")]),a("div",{staticClass:"px-2 col-1"},[t._v("Просмотров/Решено")]),a("div",{staticClass:"px-2 col text-center"},[t._v("Действия")]),a("div",{staticClass:"px-2 col text-center"},[t._v("Статус")]),a("div",{staticClass:"px-2 col-2 text-right"},[t._v("Комментарий администратора")])]),t._l(t.TASKS,(function(e){return a("div",{key:e.id,staticClass:"mx-0 row",on:{click:function(s){return t.resolveTask(e.id)}}},[a("div",{staticClass:"px-2 col-1"},[t._v("Задача № "+t._s(e.id))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskDifficulty(e.dificulty)))]),a("div",{staticClass:"px-2 col-1"},[t._v(t._s(t.getTaskClass(e.class_level)))]),a("div",{staticClass:"px-2 col-2"},[t._v(" "+t._s(e.description))]),a("div",{staticClass:"px-2 col-1"},[t._v(" "+t._s(e.author_name))]),a("div",{staticClass:"px-2 col-1"},[t._v(" "+t._s(e.source_name))]),a("div",{staticClass:"px-2 col-1"},[t._v(" "+t._s(e.views)+" / "+t._s(e.resolved))]),a("div",{staticClass:"px-2 col text-center"},["Опубликована"===e.status?[a("img",{staticClass:"mr-3",attrs:{title:"скопировать ссылку на эту задачу",src:s("87d1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.showTaskLink(e.id)}}}),a("img",{class:e.favorite?"":"gray_icon",attrs:{title:e.favorite?"удалить задачу из избранного":"добавить задачу в избранное",src:s("04a1"),alt:""},on:{click:function(s){return s.stopPropagation(),t.toggleFavoriteTask(e)}}})]:a("p",[t._v("Ожидается публикации")])],2),a("div",{staticClass:"px-2 col-1 text-center"},[t._v(" "+t._s(e.status)+" "),"Отклонено"===e.status?[a("br"),a("a",{attrs:{href:"/tester.html?id="+e.id},on:{click:function(t){return t.stopPropagation()}}},[t._v("Изменить задачу")])]:t._e()],2),a("div",{staticClass:"px-2 col-2 text-right"},[t._v(t._s(e.moder_comment))])])}))],2):a("div",{staticClass:"mt-4 text-center"},[t._v(" Задачи не найдены."),a("br"),a("br"),a("span",{staticClass:"the_link",on:{click:function(e){return t.setFilter(0)}}},[t._v("Сбросить все фильтры")])]),a("Pagination",{attrs:{pages:t.pages,show_pages:t.show_pages,request_page:t.page+1},on:{getPage:t.getTasks}})],1)},je=[],Fe={name:"MyTasks",components:{Pagination:ie},data:function(){return{pages:[],show_pages:[],limit:13,page:0,filters:!1,filter_difficult:"Сложность",filter_class_str:"Классы",filter_class:0,filter_author:0,filter_author_str:"Автор"}},mounted:function(){var t=this;return Object($["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.IS_AUTHENTICATED();case 2:if(s=e.sent,!s){e.next=14;break}return e.next=6,t.GET_AUTHORS();case 6:if(a=e.sent,!a){e.next=12;break}return e.next=10,t.GET_USER_FAVORITE_TASKS();case 10:r=e.sent,r&&t.getTasks(0);case 12:e.next=15;break;case 14:window.$("#auth").modal("show");case 15:case"end":return e.stop()}}),e)})))()},computed:Object(u["a"])({},Object(d["c"])(["TASKS","FAVORITE_TASKS","AUTHORS"])),methods:Object(u["a"])(Object(u["a"])({},Object(d["b"])(["IS_AUTHENTICATED","GET_AUTHORS","GET_USER_FAVORITE_TASKS","GET_TASKS","TOGGLE_FAVORITE_TASK"])),{},{getTasks:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a="/api/get_tasks?my_tasks=yes&page="+e.page+"&limit="+e.limit,e.filters&&(a+=e.getFilters()),e.page=t,s.next=5,e.GET_TASKS({url:a,page:t});case 5:r=s.sent,r&&(e.pages=r.pages,e.show_pages=r.showPages);case 7:case"end":return s.stop()}}),s)})))()},toggleFavoriteTask:function(t){var e=this;return Object($["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.TOGGLE_FAVORITE_TASK(t),!a){s.next=6;break}return s.next=4,a.then((function(t){return Number(t.taskId)}));case 4:r=s.sent,e.toggleTaskFavor(r);case 6:case"end":return s.stop()}}),s)})))()},toggleTaskFavor:function(t){var e,s=Object(Kt["a"])(this.TASKS);try{for(s.s();!(e=s.n()).done;){var a=e.value;if(a.id===t){a.favorite=!a.favorite;break}}}catch(n){s.e(n)}finally{s.f()}for(var r=!0,i=0;i<this.FAVORITE_TASKS.length;i++)if(this.FAVORITE_TASKS[i].id===t){this.FAVORITE_TASKS.splice(i,1),r=!1;break}r&&this.FAVORITE_TASKS.push({id:t})},resolveTask:function(t){window.location.href="/resolver.html?id="+t},showTaskLink:function(t){var e=window.location.origin+"/resolver.html?id="+t,s=window.$("#modal_link input:first");s.val(e),window.$("#modal_link").modal("show"),window.setTimeout(this.copyPasteLink,300)},copyPasteLink:function(){var t=window.$("#modal_link input:first"),e=window.$("#modal_link span:first");t.select(),document.execCommand("copy")?e.html("Ссылка на задачу скопирована в буфер обмена"):e.html("Для копирования ссылки в буфер обмена кликните по ней, затем нажмите CTRL-C и ENTER"),t.blur()},getTaskDifficulty:function(t){var e=["","1","2","3"];return e[t]},getTaskClass:function(t){var e=["","1-3","4-6","7-9","10-11"];return e[t]},getFilters:function(){var t="&filters=true";if("Сложность"!==this.filter_difficult&&(t+="&dificulty="+this.filter_difficult),this.filter_class&&(t+="&class_level="+this.filter_class),this.filter_author)for(var e=0;e<this.AUTHORS.length;e++)if(this.AUTHORS[e].id===this.filter_author){this.AUTHORS[e].user_id?t+="&user_id="+this.AUTHORS[e].user_id:t+="&author_id="+this.filter_author;break}return t},setFilter:function(t,e){window.setTimeout(this.hideFilters,50);var s=["Классы","1-3","4-6","7-9","10-11"];switch(t){case 1:this.filter_difficult=e,window.$(".dificult>div>div").removeClass("my_bold"),0===e?this.filter_difficult="Сложность":window.$(".dificult>div>div[name="+e+"]").addClass("my_bold");break;case 2:this.filter_class=e,this.filter_class_str=s[e],window.$(".class>div>div").removeClass("my_bold"),0!==e&&window.$(".class>div>div[name="+e+"]").addClass("my_bold");break;case 3:if(this.filter_author=e,window.$(".author>div>div").removeClass("my_bold"),e){for(var a=0;a<this.AUTHORS.length;a++)if(this.AUTHORS[a].id===e){this.filter_author_str=this.AUTHORS[a].name,window.$(".author>div>div[name="+e+"]").addClass("my_bold");break}}else this.filter_author_str="Автор";break;default:this.filter_author_str="Автор",this.filter_author=0,this.filter_class=0,this.filter_class_str="Классы",this.filter_difficult="Сложность",window.$(".dificult>div>div").removeClass("my_bold"),window.$(".class>div>div").removeClass("my_bold"),window.$(".author>div>div").removeClass("my_bold");break}this.filters=!(!this.filter_class&&"Сложность"===this.filter_difficult&&!this.filter_author),this.getTasks(0)},showFilter:function(t){switch(t){case 1:window.$(".dificult:first").css("display","block");break;case 2:window.$(".class:first").css("display","block");break;case 3:window.$(".author:first").css("display","block");break}},hideFilters:function(){window.$(".filter_selector").css("display","none")}})},Pe=Fe,De=Object(f["a"])(Pe,$e,je,!1,null,null,null),Me=De.exports;a["a"].use(I["a"]);var Ge=[{path:"/",component:le},{path:"/favorites",component:ve},{path:"/my_tasks",component:Me}],Ke=[{path:"/admin",component:D},{path:"/logs",component:B},{path:"/users",component:Vt},{path:"/tasks",component:Xt},{path:"/moderation",component:Dt}],Le=[{path:"/auth_forget_confirm",component:Ue},{path:"/auth_reg_confirm",component:ye},{path:"/page-not-found",alias:"*",component:Ce}],He=[].concat(Ge,Ke,Le),We=new I["a"]({mode:"history",base:"/",routes:He}),Ve=s("bc3a"),ze=s.n(Ve),Ze=s("2b27"),qe=s.n(Ze),Je="https://zadachi.matclass.ru",Be={IS_AUTHENTICATED:function(t){var e=t.commit;return ze.a.post("".concat(Je,"/api/is_authenticated_user")).then((function(t){return e("SET_IS_AUTHENTICATED",t.data),!!t.data.status})).catch((function(t){return window.myAlert(t.message),!1}))},FORGET_PASSWORD:function(t,e){t.commit;return ze.a.post("".concat(Je,"/api/auth_forget"),{login:e}).then((function(t){"true"===t.data.success?window.myAlert(t.data.message):window.myAlert(t.data.error)})).catch((function(t){window.myAlert(t.message)}))},LOGIN:function(t,e){t.commit;var s=e.login,a=e.pw;return ze.a.post("".concat(Je,"/api/auth_login"),{login:s,pw:a}).then((function(t){"true"===t.data.success?window.location.reload():window.myAlert(t.data.error)})).catch((function(t){window.myAlert(t.message)}))},REGISTRATION:function(t,e){t.commit;var s=e.fio,a=e.login,r=e.roleId,i=e.pw;return ze.a.post("".concat(Je,"/api/auth_reg"),{fio:s,login:a,roleId:r,pw:i}).then((function(t){"true"===t.data.success?window.myAlert(t.data.message):window.myAlert(t.data.error)})).catch((function(t){window.myAlert(t.message)}))},LOGOUT:function(t){t.commit;return ze.a.get("".concat(Je,"/api/auth_logout")).then((function(t){window.location.reload()})).catch((function(t){window.myAlert(t.message)}))}},Xe={SET_IS_AUTHENTICATED:function(t,e){t.user_fio=e.fio,t.user_powers=e.powers,t.user_is_authenticated=e.status}},Qe={USER_FIO:function(t){return t.user_fio},USER_POWERS:function(t){return t.user_powers},USER_IS_AUTHENTICATED:function(t){return t.user_is_authenticated}},Ye={user_is_authenticated:!1,user_fio:"",user_powers:""},ts="https://zadachi.matclass.ru",es={ADMIN_GET_USERS:function(t){var e=t.commit;return ze.a.post("".concat(ts,"/api/admin/get_users")).then((function(t){return"success"===t.data.status?(e("SET_ADMIN_USERS",t.data.data),!0):(window.location.href="/",!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_ADD_USER:function(t,e){t.commit;return ze.a.post("".concat(ts,"/api/admin/add_user"),{user:e}).then((function(t){return"success"===t.data.status||(window.myAlert(t.data.error),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_EDIT_USER:function(t,e){t.commit;return ze.a.post("".concat(ts,"/api/admin/edit_user"),{user:e}).then((function(t){return"success"===t.data.status?(window.myAlert("Данные пользователя изменены"),!0):(window.myAlert(t.data.message),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_DELETE_USERS:function(t,e){t.commit;return ze.a.post("".concat(ts,"/api/admin/delete_users"),{users:e}).then((function(t){return"success"===t.data.status})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_GET_TASKS:function(t,e){var s=t.commit;return ze.a.post("".concat(ts,"/api/admin/get_tasks"),{page:e}).then((function(t){"success"===t.data.status?(s("SET_ADMIN_TASKS",t.data.tasks),s("SET_PAGES_ALL_TASKS",t.data.count_pages)):window.location.href="/"})).catch((function(t){window.myAlert(t.message)}))},ADMIN_GET_TASKS_FOR_CHECK:function(t,e){var s=t.commit;return ze.a.post("".concat(ts,"/api/admin/tasks_for_check"),{page:e}).then((function(t){"success"===t.data.status?(s("SET_ADMIN_TASKS_FOR_CHECK",t.data.tasks),s("SET_PAGES_NEW_TASKS",t.data.count_pages)):window.myAlert("Ошибка...")})).catch((function(t){window.myAlert(t.message)}))},ADMIN_EDIT_TASK:function(t,e){t.commit;return ze.a.post("".concat(ts,"/api/admin/edit_task"),{task:e}).then((function(t){return"success"===t.data.status||(window.myAlert("Ошибка"),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_DELETE_TASK:function(t,e){t.commit;return ze.a.post("".concat(ts,"/api/admin/delete_task"),{taskId:e}).then((function(t){return"success"===t.data.status||(window.myAlert("Ошибка"),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_LOCK_TASK_AUTHOR:function(t,e){t.commit;var s=e.userId,a=e.taskId,r=e.timeLock;return ze.a.post("".concat(ts,"/api/admin/lock_author_task"),{userId:s,taskId:a,timeLock:r}).then((function(t){return"success"===t.data.status||(window.myAlert("Ошибка"),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_CONFIRM_REJECT_TASK:function(t,e){t.commit;var s=e.taskId,a=e.typeAction,r=e.moderComment;return ze.a.post("".concat(ts,"/api/admin/confirm_reject_task"),{taskId:s,typeAction:a,moderComment:r}).then((function(t){return"success"===t.data.status||(window.myAlert("Произошла непонятная ошибка... Перезагрузите страницу и попробуйте ещё раз."),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},ADMIN_GET_LOGS:function(t,e){var s=t.commit,a=e.page,r=e.onlyLastLogs;return ze.a.post("".concat(ts,"/api/admin/get_logs"),{page:a,onlyLastLogs:r}).then((function(t){"success"===t.data.status?(s("SET_ADMIN_LOGS",t.data.logs),null!==t.data.count_pages&&s("SET_PAGES_LOGS",t.data.count_pages)):window.myAlert("Ошибка...")})).catch((function(t){window.myAlert(t.message)}))}},ss={SET_COUNT:function(t,e){t.count=e},SET_ADMIN_TASKS_FOR_CHECK:function(t,e){t.admin_tasks_for_check=e},SET_ADMIN_USERS:function(t,e){t.admin_users=e},SET_ADMIN_TASKS:function(t,e){t.admin_tasks=e},SET_ADMIN_LOGS:function(t,e){t.logs=e},SET_PAGES_ALL_TASKS:function(t,e){t.pages_all_tasks=e},SET_PAGES_NEW_TASKS:function(t,e){t.pages_new_tasks=e},SET_PAGES_LOGS:function(t,e){t.pages_logs=e},SET_PAGES_USERS:function(t,e){t.pages_users=e}},as={ADMIN_USERS:function(t){return t.admin_users},ADMIN_TASKS:function(t){return t.admin_tasks},ADMIN_TASKS_FOR_CHECK:function(t){return t.admin_tasks_for_check},ADMIN_LOGS:function(t){return t.logs},PAGES_ALL_TASKS:function(t){return t.pages_all_tasks},PAGES_NEW_TASKS:function(t){return t.pages_new_tasks},PAGES_LOGS:function(t){return t.pages_logs}},rs={admin_tasks_for_check:[],admin_users:[],admin_tasks:[],logs:[],count:{},pages_all_tasks:0,pages_new_tasks:0,pages_users:0,pages_logs:0};a["a"].use(d["a"]),a["a"].use(qe.a),a["a"].$cookies.config("30d");var is="https://zadachi.matclass.ru";ze.a.defaults.xsrfCookieName="csrftoken",ze.a.defaults.xsrfHeaderName="X-CSRFToken",ze.a.defaults.withCredentials=!0;var ns=new d["a"].Store({state:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Ye),rs),{},{roles:[],authors:[],tasks:[],favorite_tasks:[]}),mutations:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Xe),ss),{},{SET_ROLES_TO_STATE:function(t,e){t.roles=e},SET_AUTHORS_TO_STATE:function(t,e){t.authors=e},SET_TASKS:function(t,e){t.tasks=e},SET_USER_FAVORITE_TASKS:function(t,e){t.favorite_tasks=e}}),actions:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Be),es),{},{GET_ROLES:function(t){var e=t.commit;return ze.a.post("".concat(is,"/api/get_authors_sources_roles"),{type_data:"roles"}).then((function(t){return e("SET_ROLES_TO_STATE",t.data.data),t.data})).catch((function(t){window.myAlert(t.message)}))},GET_AUTHORS:function(t){var e=t.commit;return ze.a.post("".concat(is,"/api/get_authors_sources_roles"),{type_data:"authors"}).then((function(t){return e("SET_AUTHORS_TO_STATE",t.data.data),!0})).catch((function(t){return window.myAlert(t.message),!1}))},GET_COUNT:function(t){var e=t.commit;return ze.a.post("".concat(is,"/api/get_count_users_tasks")).then((function(t){"success"===t.data.status&&e("SET_COUNT",t.data.data)})).catch((function(t){window.myAlert(t.message)}))},GET_TASKS:function(t,e){var s=this,a=t.commit,r=e.url,i=e.page;return ze.a.get("".concat(is).concat(r)).then((function(t){if("true"===t.data.success){for(var e=t.data.tasks,r=0;r<e.length;r++){e[r].favorite=!1;for(var n=0;n<s.state.favorite_tasks.length;n++)if(s.state.favorite_tasks[n].id===e[r].id){e[r].favorite=!0;break}}for(var o=[],c=[],l=1;l<t.data.maxPage;l++)o.push(l),(l>i-3||l>t.data.maxPage-8)&&(l<i+5||l<8)&&c.push(l);return console.log(t.data),a("SET_TASKS",e),{pages:o,showPages:c}}return window.myAlert(t.data.error),!1})).catch((function(t){return window.myAlert(t),!1}))},GET_USER_FAVORITE_TASKS:function(t){var e=t.commit;return ze.a.post("".concat(is,"/api/get_favorite_tasks")).then((function(t){return"true"===t.data.success?(e("SET_USER_FAVORITE_TASKS",t.data.tasks),!0):(window.myAlert(t.data.error),!1)})).catch((function(t){return window.myAlert(t.message),!1}))},TOGGLE_FAVORITE_TASK:function(t,e){var s=this,a=(t.commit,"add_favorite_task");return e.favorite&&(a="delete_task_from_favorite"),ze.a.post("".concat(is,"/api/").concat(a),{taskId:e.id}).then((function(t){return s.state.user_is_authenticated?"true"===t.data.success?{taskId:t.data.task_id}:(window.myAlert(t.data.error),!1):(window.$("#auth").modal("show"),!1)})).catch((function(t){return window.myAlert(t.message),!1}))}}),getters:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Qe),as),{},{ROLES:function(t){return t.roles},AUTHORS:function(t){return t.authors},COUNT:function(t){return t.count},TASKS:function(t){return t.tasks},FAVORITE_TASKS:function(t){return t.favorite_tasks}})});a["a"].config.productionTip=!1,new a["a"]({router:We,store:ns,render:function(t){return t(R)}}).$mount("#app")},"58c3":function(t,e,s){"use strict";s("7673")},"5bd6":function(t,e,s){"use strict";s("366a")},"644a":function(t,e,s){t.exports=s.p+"img/task_about.c68ae71a.svg"},7673:function(t,e,s){},"7d6d":function(t,e,s){"use strict";s("ed5c")},"7ff6":function(t,e,s){"use strict";s("f19b")},8347:function(t,e,s){"use strict";s("c4a6")},"87d1":function(t,e,s){t.exports=s.p+"img/copy.787ef1bc.svg"},"8d14":function(t,e,s){t.exports=s.p+"img/alert.944be15f.svg"},a29e:function(t,e,s){"use strict";s("4a83")},a505:function(t,e,s){},a658:function(t,e,s){t.exports=s.p+"img/modal_h4.38cc7285.svg"},c4a6:function(t,e,s){},cb95:function(t,e,s){"use strict";s("eac2")},cee1:function(t,e,s){"use strict";s("a505")},dc13:function(t,e,s){"use strict";s("e3ef")},de8c:function(t,e,s){},dfcc:function(t,e,s){"use strict";s("230b")},e3ef:function(t,e,s){},eac2:function(t,e,s){},ed5c:function(t,e,s){},f19b:function(t,e,s){},f7a9:function(t,e,s){"use strict";s("178d")}});
//# sourceMappingURL=app.886c416c.js.map